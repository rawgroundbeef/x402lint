---
phase: 10-website-integration
plan: 02
type: execute
wave: 2
depends_on: ["10-01"]
files_modified:
  - apps/website/index.html
  - apps/website/input.js
autonomous: false

must_haves:
  truths:
    - "Example configs in the dropdown use canonical v2 format with CAIP-2 networks"
    - "Loading each example and clicking Validate produces correct results"
    - "Legacy flat example shows deprecation warnings with fix suggestions"
    - "validator.js and chains.js are deleted (no longer loaded or needed)"
  artifacts:
    - path: "apps/website/index.html"
      provides: "Updated example configs in v2 canonical format, updated code-block previews"
      contains: "x402Version"
    - path: "apps/website/input.js"
      provides: "Clean input handler with adapter, no references to old validator.js"
  key_links:
    - from: "apps/website/index.html examples object"
      to: "window.x402Lint.validate"
      via: "loadExampleBtn loads example -> inputEl.value -> validateBtn.click -> handleValidation -> validateX402Config adapter -> SDK"
      pattern: "examples\\["
---

<objective>
Update example configs to canonical v2 format, remove the deleted validator.js and chains.js files, and verify the complete end-to-end flow.

Purpose: Examples are the first thing users try. They must work with the SDK and showcase the correct v2 format. Old files must be cleaned up.
Output: Working examples in canonical v2 format, clean codebase with no dead files.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/10-website-integration/10-RESEARCH.md
@.planning/phases/10-website-integration/10-01-SUMMARY.md
@apps/website/index.html
@apps/website/input.js
@packages/x402lint/src/types/config.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update example configs and tabs to canonical v2 format</name>
  <files>apps/website/index.html</files>
  <action>
Update the example configs and their HTML code-block previews in index.html. There are two places to update for each example: (1) the visual code-block in the HTML body, and (2) the `examples` JavaScript object in the inline script.

**Tab restructure:**
Change the 4 tabs from: "Flat (Simple)", "accepts (v1)", "payments (v2)", "+ Marketplace"
To: "v2 (Recommended)", "v1", "Flat (Legacy)", "+ Marketplace"

Reorder so v2 is first (default active tab). Update `data-tab` attributes and corresponding `example-panel` div IDs accordingly.

**Example 1: v2 (Recommended)** -- tab key: `v2`
This should be the DEFAULT active tab (shown first). Use canonical v2 format:
```json
{
  "x402Version": 2,
  "resource": {
    "url": "https://api.example.com/endpoint"
  },
  "accepts": [{
    "scheme": "exact",
    "network": "solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",
    "payTo": "5F5Yy9qJov8xK67vEWRoZHppWHEmH3WuG7mSfvLuqUTz",
    "asset": "EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",
    "amount": "25000",
    "maxTimeoutSeconds": 300
  }]
}
```
Helper text: "Canonical v2 format. Recommended for all new endpoints."

**Example 2: v1** -- tab key: `v1`
```json
{
  "x402Version": 1,
  "accepts": [{
    "scheme": "exact",
    "network": "solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",
    "payTo": "5F5Yy9qJov8xK67vEWRoZHppWHEmH3WuG7mSfvLuqUTz",
    "maxAmountRequired": "25000",
    "asset": "EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"
  }]
}
```
Helper text: "v1 format. Uses maxAmountRequired instead of amount. Consider upgrading to v2."

**Example 3: Flat (Legacy)** -- tab key: `flat`
Keep using simple field names since this IS the legacy format (the SDK will detect it as flat-legacy and warn):
```json
{
  "amount": "25000",
  "currency": "USDC",
  "network": "solana",
  "payTo": "5F5Yy9qJov8xK67vEWRoZHppWHEmH3WuG7mSfvLuqUTz"
}
```
Helper text: "Legacy flat format. Works but deprecated. Click 'Show v2 equivalent' to upgrade."

**Example 4: + Marketplace** -- tab key: `marketplace`
```json
{
  "x402Version": 2,
  "resource": {
    "url": "https://api.example.com/endpoint"
  },
  "accepts": [{
    "scheme": "exact",
    "network": "eip155:8453",
    "payTo": "0x1234567890abcdef1234567890abcdef12345678",
    "asset": "0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913",
    "amount": "10000",
    "maxTimeoutSeconds": 300
  }],
  "extensions": {
    "outputSchema": {
      "type": "object",
      "properties": { "result": { "type": "string" } }
    },
    "metadata": {
      "name": "My API",
      "description": "Does something useful",
      "category": "ai"
    }
  }
}
```
Helper text: "v2 + marketplace metadata in extensions. Required for x402jobs listing."

**Update the HTML code-block previews** to match the new JSON (the colored `<span class="key">` / `<span class="string">` / `<span class="number">` elements in the `.code-block` divs).

**Update `currentTab` default** from `'flat'` to `'v2'`.

**Update the `examples` JavaScript object** to match the new JSON strings above. The keys should still be `flat`, `v1`, `v2`, `marketplace` to match the `data-tab` attributes.

**Important:** The amount values in v2/v1 examples use "25000" (atomic units as string) because that's what the canonical spec requires. The flat-legacy example uses "25000" as a string too, though historically it was a number. The SDK handles both.
  </action>
  <verify>
1. Open index.html in browser
2. Default tab shows "v2 (Recommended)" with canonical v2 JSON
3. Click each tab: v1, Flat (Legacy), + Marketplace -- verify correct JSON shown
4. Click "Load into validator" on v2 tab -> click Validate -> green Valid result
5. Click "Load into validator" on flat tab -> click Validate -> shows warnings about legacy format
6. Click "Load into validator" on v1 tab -> click Validate -> validates correctly
7. Click "Load into validator" on marketplace tab -> click Validate -> shows v2 result with marketplace metadata
  </verify>
  <done>
- v2 is the default (first) tab with canonical format
- All 4 example configs use correct field names and CAIP-2 networks
- Each example loads and validates successfully
- Flat example triggers legacy format warnings
  </done>
</task>

<task type="auto">
  <name>Task 2: Delete old validator.js and chains.js files</name>
  <files>apps/website/validator.js, apps/website/chains.js</files>
  <action>
Delete the following files that are no longer loaded by the website:

1. `apps/website/validator.js` -- replaced by SDK + adapter in input.js
2. `apps/website/chains.js` -- replaced by SDK's network registry

Use `git rm` to properly track the deletion.

Also verify that no file in `apps/website/` still references these deleted files. The only references should have been in the old `<script>` tags which were replaced in Plan 01.
  </action>
  <verify>
1. `ls apps/website/` shows only: index.html, input.js, worker/, package.json, and test files
2. `grep -r "validator.js\|chains.js" apps/website/` returns no matches (except possibly in test files which are separate)
3. Open index.html in browser -- no 404 errors in Network tab for missing scripts
  </verify>
  <done>
- validator.js deleted
- chains.js deleted
- No references to deleted files remain in active code
- Website still works after deletion
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete website integration: SDK browser bundle replaces all old validation scripts, adapter layer maps SDK output to display logic, example configs updated to canonical v2 format, old files cleaned up.
  </what-built>
  <how-to-verify>
1. Open apps/website/index.html in a browser (or run a local server)
2. View page source -- confirm only 2 script tags (jsdelivr x402lint IIFE + input.js)
3. Open browser console -- confirm no errors, `window.x402Lint.validate` is a function
4. Default "v2 (Recommended)" example tab is shown
5. Click "Load into validator" -> Validate -> green "Valid" result with v2 (Canonical) badge
6. Switch to "Flat (Legacy)" tab -> Load -> Validate -> shows warnings about deprecated format
7. Switch to "v1" tab -> Load -> Validate -> validates correctly with legacy warning
8. Switch to "+ Marketplace" tab -> Load -> Validate -> shows v2 result with marketplace info
9. Paste invalid JSON `{broken` -> shows error
10. Click "Show v2 equivalent" on a flat config -> converts to canonical v2 format
11. Verify Network tab shows NO 404 requests for validator.js or chains.js
  </how-to-verify>
  <resume-signal>Type "approved" or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
1. `ls apps/website/` -- no validator.js, no chains.js
2. Page source has 2 script tags
3. All 4 example configs load and validate correctly
4. Flat legacy config shows deprecation warnings
5. v2 config shows green Valid
6. URL validation flow works (if proxy is reachable)
7. "Show v2 equivalent" works
8. No console errors
</verification>

<success_criteria>
- Example configs use canonical v2 format with CAIP-2 networks, scheme, resource fields
- v2 is the default tab (shown first)
- Legacy flat example produces deprecation warnings with fix suggestions
- validator.js and chains.js are deleted
- Complete end-to-end flow verified by user
</success_criteria>

<output>
After completion, create `.planning/phases/10-website-integration/10-02-SUMMARY.md`
</output>
